<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkedIn Text Formatter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .message.success {
            background-color: rgba(5, 118, 66, 0.1);
            color: #057642;
        }
        .message.error {
            background-color: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }
    </style>
</head>
<body class="bg-gray-100 p-4 min-h-screen flex justify-center items-start">
    <div class="container max-w-4xl w-full bg-white rounded-xl shadow-lg p-6 flex flex-col gap-6">
        <header class="text-center">
            <h1 class="text-2xl sm:text-3xl font-bold text-[#0a66c2] mb-2">
                <i class="fab fa-linkedin mr-2"></i>LinkedIn Text Formatter
            </h1>
            <p class="text-sm sm:text-base text-gray-500">Select text and click a button to format it for LinkedIn.</p>
        </header>

        <div class="editor-container flex flex-col gap-4">
            <textarea id="editor" class="w-full min-h-[200px] max-h-[300px] p-4 border border-gray-300 rounded-lg text-base resize-y bg-white text-gray-900 font-sans" placeholder="Type or paste your text here..."></textarea>

            <!-- The Ribbon Toolbar -->
            <div class="flex flex-col gap-4">
                <!-- Ribbon Headers -->
                <div id="ribbon-headers" class="flex flex-wrap sm:flex-nowrap gap-2 justify-center sm:justify-start">
                    <button class="ribbon-header-btn flex items-center justify-center sm:justify-start px-4 py-2 border border-gray-300 rounded-lg text-sm font-semibold text-[#004182] transition-colors hover:bg-gray-200 active:bg-[#378fe9] active:text-white" data-target="font-formatting">
                        <i class="fas fa-paint-brush mr-2 text-lg sm:text-base"></i>
                        <span class="hidden sm:inline">Text Formatting</span>
                    </button>
                    <button class="ribbon-header-btn flex items-center justify-center sm:justify-start px-4 py-2 border border-gray-300 rounded-lg text-sm font-semibold text-[#004182] transition-colors hover:bg-gray-200 active:bg-[#378fe9] active:text-white" data-target="special-styles">
                        <i class="fas fa-magic mr-2 text-lg sm:text-base"></i>
                        <span class="hidden sm:inline">Special Styles</span>
                    </button>
                    <button class="ribbon-header-btn flex items-center justify-center sm:justify-start px-4 py-2 border border-gray-300 rounded-lg text-sm font-semibold text-[#004182] transition-colors hover:bg-gray-200 active:bg-[#378fe9] active:text-white" data-target="decorations">
                        <i class="fas fa-feather-alt mr-2 text-lg sm:text-base"></i>
                        <span class="hidden sm:inline">Decorations</span>
                    </button>
                    <button class="ribbon-header-btn flex items-center justify-center sm:justify-start px-4 py-2 border border-gray-300 rounded-lg text-sm font-semibold text-[#004182] transition-colors hover:bg-gray-200 active:bg-[#378fe9] active:text-white" data-target="hashtags">
                        <i class="fas fa-hashtag mr-2 text-lg sm:text-base"></i>
                        <span class="hidden sm:inline">Hashtags</span>
                    </button>
                    <button class="ribbon-header-btn flex items-center justify-center sm:justify-start px-4 py-2 border border-gray-300 rounded-lg text-sm font-semibold text-[#004182] transition-colors hover:bg-gray-200 active:bg-[#378fe9] active:text-white" data-target="emojis">
                        <i class="fas fa-smile mr-2 text-lg sm:text-base"></i>
                        <span class="hidden sm:inline">Emojis</span>
                    </button>
                </div>

                <!-- Ribbon Content Panels -->
                <div id="ribbon-content-container" class="border border-gray-300 rounded-lg p-4 bg-gray-50 min-h-[150px]">
                    <!-- Font Formatting Panel -->
                    <div id="font-formatting" class="toolbar-panel hidden">
                        <div class="flex flex-wrap gap-2">
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="normal" title="Normal">
                                <i class="fas fa-font mr-1"></i>Normal
                            </button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="serif-bold" title="Bold">𝐁 Bold</button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="serif-italic" title="Italic">𝐼 Italic</button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="serif-bold-italic" title="Bold Italic">𝑩𝑰 Bold Italic</button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="sans" title="Sans-serif">𝖲 Sans</button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="sans-bold" title="Bold Sans-serif">𝗦 Bold Sans</button>
                        </div>
                    </div>

                    <!-- Special Styles Panel -->
                    <div id="special-styles" class="toolbar-panel hidden">
                        <div class="flex flex-wrap gap-2">
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="script" title="Script">𝒮 Script</button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="monospace" title="Monospace">𝙼 Monospace</button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="doublestruck" title="Double-struck">𝔻 Double-struck</button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="fraktur" title="Fraktur">𝔉 Fraktur</button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="circled-negative" title="Circled">🅐 Circled</button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="squared-negative" title="Squared">🅰 Squared</button>
                        </div>
                    </div>

                    <!-- Decorations Panel -->
                    <div id="decorations" class="toolbar-panel hidden">
                        <div class="flex flex-wrap gap-2">
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="underline" title="Underline">
                                <i class="fas fa-underline mr-1"></i>Underline
                            </button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="strike" title="Strikethrough">
                                <i class="fas fa-strikethrough mr-1"></i>Strikethrough
                            </button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="bold-underline" title="Bold Underline">𝐁̲ Bold Underline</button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="bold-strike" title="Bold Strikethrough">𝐁̶ Bold Strikethrough</button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" data-style="reset" title="Reset">
                                <i class="fas fa-redo mr-1"></i>Reset
                            </button>
                            <button class="format-btn px-3 py-2 bg-white border border-gray-300 rounded-md text-sm cursor-pointer transition-colors hover:bg-gray-200" id="text-to-hashtag" title="Convert to Hashtag">
                                <i class="fas fa-hashtag mr-1"></i>To Hashtag
                            </button>
                        </div>
                    </div>

                    <!-- Hashtags Panel -->
                    <div id="hashtags" class="toolbar-panel hidden">
                        <div class="flex flex-col sm:flex-row gap-2">
                            <div class="relative flex-1">
                                <input type="text" id="hashtag-input" class="w-full p-2 border border-gray-300 rounded-lg text-sm" placeholder="Type to search or create a hashtag...">
                                <div id="hashtag-suggestions" class="absolute top-full left-0 right-0 z-10 bg-white border border-gray-300 rounded-lg shadow-md max-h-40 overflow-y-auto hidden"></div>
                            </div>
                            <button id="add-hashtag-btn" class="add-hashtag-btn px-4 py-2 bg-[#0a66c2] text-white rounded-lg text-sm font-semibold transition-colors hover:bg-[#004182]">Add</button>
                        </div>
                    </div>

                    <!-- Emojis Panel -->
                    <div id="emojis" class="toolbar-panel hidden">
                        <div class="flex flex-wrap gap-2 mb-2" id="emoji-categories"></div>
                        <div class="emoji-grid grid grid-cols-6 sm:grid-cols-10 gap-2 p-3 border border-gray-300 rounded-lg bg-white overflow-y-auto max-h-[200px]" id="emoji-grid"></div>
                    </div>
                </div>
            </div>

            <div class="actions flex justify-end gap-3 mt-4">
                <button class="action-btn px-5 py-2 bg-white border border-gray-300 text-gray-800 font-semibold rounded-lg transition-colors hover:bg-gray-200" id="reset-btn">
                    <i class="fas fa-trash mr-1"></i>Reset All
                </button>
                <button class="action-btn px-5 py-2 bg-[#0a66c2] text-white font-semibold rounded-lg transition-colors hover:bg-[#004182]" id="copy-btn">
                    <i class="fas fa-copy mr-1"></i>Copy Text
                </button>
            </div>

            <div class="message opacity-0 transition-opacity duration-300 p-2 rounded-lg text-center" id="message"></div>

            <div class="instructions bg-gray-50 border-l-4 border-[#0a66c2] p-4 mt-4 rounded-md">
                <h3 class="mt-0 text-[#0a66c2] font-semibold text-lg">How to use this tool:</h3>
                <ul class="list-disc pl-5 mt-2 text-sm text-gray-700">
                    <li>Enter your text in the text area above.</li>
                    <li>Select a portion of text and click a formatting button.</li>
                    <li>Tool sections can be opened by clicking their header.</li>
                    <li>Use the "Copy" button to copy the formatted text.</li>
                    <li>Use the "To Hashtag" option to convert selected text into a hashtag.</li>
                    <li><strong>Note:</strong> LinkedIn uses special Unicode characters for formatting. Once applied, a font format cannot be reverted to normal. You will have to retype or use the "Reset All" button.</li>
                </ul>
            </div>
            
            <div class="signature text-center pt-4 border-t border-gray-300 text-gray-500 text-sm mt-4">
                <p>Made with ❤️ by <a href="https://www.linkedin.com/in/lbendjedid/" target="_blank" class="text-[#0a66c2] font-semibold hover:underline">Lokman</a></p>
            </div>
        </div>
    </div>

    <script>
        const hashtagDictionary = [
            'Technology', 'Innovation', 'Digital', 'AI', 'ArtificialIntelligence', 'MachineLearning',
            'DataScience', 'BigData', 'Cloud', 'CloudComputing', 'IoT', 'InternetOfThings',
            'Business', 'Entrepreneur', 'Startup', 'Leadership', 'Management', 'Strategy',
            'Marketing', 'DigitalMarketing', 'ContentMarketing', 'SocialMedia', 'SEO',
            'SearchEngineOptimization', 'GrowthHacking', 'Branding', 'Advertising', 'Sales',
            'Programming', 'Design', 'Development', 'WebDevelopment', 'AppDevelopment', 'UX', 'UI',
            'Careers', 'JobSearch', 'Recruitment', 'HR', 'HumanResources', 'Networking',
            'France', 'French', 'Europe', 'EU', 'Germany', 'UK', 'USA', 'Canada', 'Australia',
            'Fintech', 'Cybersecurity', 'ProductManagement', 'PersonalBranding', 'JobTips', 
            'CareerGrowth', 'FutureOfWork', 'RemoteWork', 'Startups', 'VC', 'PublicSpeaking', 
            'InnovationMindset', 'DataAnalytics', 'SoftwareEngineering', 'UXDesign', 'UIUX', 
            'CommunityBuilding', 'ContentCreation', 'SocialImpact', 'Sustainability', 'GreenTech', 
            'HealthTech', 'EdTech', 'WorkLifeBalance', 'Productivity', 'Mindfulness', 'Web3', 
            'Blockchain', 'Cryptocurrency', 'Agile', 'Scrum', 'DevOps', 'CloudNative', 'SaaS', 
            'CustomerExperience', 'CX', 'UserExperience', 'InclusiveDesign', 'AIethics', 'Automation', 
            'FutureSkills', 'SkillDevelopment', 'Learning', 'PersonalDevelopment', 'Teamwork', 
            'Motivation', 'Success'
        ];

        const styleMap = {
            'normal': {},
            'serif-bold': { upper: 0x1D400, lower: 0x1D41A, digits: 0x1D7CE },
            'serif-italic': { upper: 0x1D434, lower: 0x1D44E },
            'serif-bold-italic': { upper: 0x1D468, lower: 0x1D482 },
            'sans': { upper: 0x1D5A0, lower: 0x1D5BA },
            'sans-bold': { upper: 0x1D5D4, lower: 0x1D5EE, digits: 0x1D7EC },
            'sans-italic': { upper: 0x1D608, lower: 0x1D622 },
            'sans-bold-italic': { upper: 0x1D63C, lower: 0x1D656 },
            'script': { upper: 0x1D49C, lower: 0x1D4B6 },
            'monospace': { upper: 0x1D670, lower: 0x1D68A, digits: 0x1D7F6 },
            'doublestruck': { upper: 0x1D538, lower: 0x1D552 },
            'fraktur': { upper: 0x1D504, lower: 0x1D51E },
            'circled-negative': {
                'A': '🅐', 'B': '🅑', 'C': '🅒', 'D': '🅓', 'E': '🅔', 'F': '🅕', 'G': '🅖', 'H': '🅗', 'I': '🅘', 'J': '🅙', 
                'K': '🅚', 'L': '🅛', 'M': '🅜', 'N': '🅝', 'O': '🅞', 'P': '🅟', 'Q': '🅠', 'R': '🅡', 'S': '🅢', 'T': '🅣', 
                'U': '🅤', 'V': '🅥', 'W': '🅦', 'X': '🅧', 'Y': '🅨', 'Z': '🅩',
                'a': '🅐', 'b': '🅑', 'c': '🅒', 'd': '🅓', 'e': '🅔', 'f': '🅕', 'g': '🅖', 'h': '🅗', 'i': '🅘', 'j': '🅙', 
                'k': '🅚', 'l': '🅛', 'm': '🅜', 'n': '🅝', 'o': '🅞', 'p': '🅟', 'q': '🅠', 'r': '🅡', 's': '🅢', 't': '🅣', 
                'u': '🅤', 'v': '🅥', 'w': '🅦', 'x': '🅧', 'y': '🅨', 'z': '🅩'
            },
            'squared-negative': {
                'A': '🅰', 'B': '🅱', 'C': '🅲', 'D': '🅳', 'E': '🅴', 'F': '🅵', 'G': '🅶', 'H': '🅷', 'I': '🅸', 'J': '🅹', 
                'K': '🅺', 'L': '🅻', 'M': '🅼', 'N': '🅽', 'O': '🅾', 'P': '🅿', 'Q': '🆀', 'R': '🆁', 'S': '🆂', 'T': '🆃', 
                'U': '🆄', 'V': '🆅', 'W': '🆆', 'X': '🆇', 'Y': '🆈', 'Z': '🆉',
                'a': '🅰', 'b': '🅱', 'c': '🅲', 'd': '🅳', 'e': '🅴', 'f': '🅵', 'g': '🅶', 'h': '🅷', 'i': '🅸', 'j': '🅹', 
                'k': '🅺', 'l': '🅻', 'm': '🅼', 'n': '🅽', 'o': '🅾', 'p': '🅿', 'q': '🆀', 'r': '🆁', 's': '🆂', 't': '🆃', 
                'u': '🆄', 'v': '🆅', 'w': '🆆', 'x': '🆇', 'y': '🆈', 'z': '🆉'
            }
        };

        const scriptSpecialMap = {
            'B': 'ℬ', 'E': 'ℰ', 'F': 'ℱ', 'H': 'ℋ', 'I': 'ℐ', 'L': 'ℒ', 'M': 'ℳ', 'R': 'ℛ',
            'g': 'ℊ', 'e': 'ℯ', 'o': 'ℴ', 'h': 'ℎ'
        };

        const revertScriptMap = {
            'ℬ': 'B', 'ℰ': 'E', 'ℱ': 'F', 'ℋ': 'H', 'ℐ': 'I', 'ℒ': 'L', 'ℳ': 'M', 'ℛ': 'R',
            'ℊ': 'g', 'ℯ': 'e', 'ℴ': 'o', 'ℎ': 'h'
        };
        
        const revertCircledMap = Object.entries(styleMap['circled-negative']).reduce((acc, [key, value]) => {
            acc[value] = key;
            return acc;
        }, {});

        const revertSquaredMap = Object.entries(styleMap['squared-negative']).reduce((acc, [key, value]) => {
            acc[value] = key;
            return acc;
        }, {});

        const frenchChars = {
            'À': 'A', 'Á': 'A', 'Â': 'A', 'Ã': 'A', 'Ä': 'A', 'Å': 'A', 'Æ': 'AE',
            'Ç': 'C', 'È': 'E', 'É': 'E', 'Ê': 'E', 'Ë': 'E', 'Ì': 'I', 'Í': 'I',
            'Î': 'I', 'Ï': 'I', 'Ñ': 'N', 'Ò': 'O', 'Ó': 'O', 'Ô': 'O', 'Õ': 'O',
            'Ö': 'O', 'Ø': 'O', 'Ù': 'U', 'Ú': 'U', 'Û': 'U', 'Ü': 'U', 'Ý': 'Y',
            'ß': 'ss', 'à': 'a', 'á': 'a', 'â': 'a', 'ã': 'a', 'ä': 'a', 'å': 'a',
            'æ': 'ae', 'ç': 'c', 'è': 'e', 'é': 'e', 'ê': 'e', 'ë': 'e', 'ì': 'i',
            'í': 'i', 'î': 'i', 'ï': 'i', 'ñ': 'n', 'ò': 'o', 'ó': 'o', 'ô': 'o',
            'õ': 'o', 'ö': 'o', 'ø': 'o', 'ù': 'u', 'ú': 'u', 'û': 'u', 'ü': 'u',
            'ý': 'y', 'ÿ': 'y'
        };

        const directItalicMap = {
            'h': 'ℎ', 'H': '𝐻'
        };

        const emojiCategoriesData = {
            'Smileys & Emotion': ['😀', '😃', '😄', '😁', '😆', '😅', '😂', '🤣', '😊', '😇', '🙂', '😉', '😌', '😍', '🥰', '😘', '😗', '😙', '😚', '😋', '😛', '😜', '🤪', '🤨', '🧐', '🤓', '😎', '🤩', '🥳', '😏', '😒', '😞', '😟', '😠', '😡', '🤬', '🤯', '😳', '🥵', '🥶', '😵', '😷', '🤒', '🤕', '🤢', '🤮', '🤧', '😇', '🤫', '🤥', '🤔', '🤨'],
            'Gestures & Body': ['👋', '🤚', '🖐️', '✋', '🖖', '👌', '🤌', '🤏', '✌️', '🤞', '🫰', '🤟', '🤘', '🤙', '👈', '👉', '👆', '👇', '☝️', '👍', '👎', '✊', '👊', '🤛', '🤜', '👏', '🙌', '🤲', '🤝', '🙏', '✍️', '💅', '🤳', '💪', '🦵', '🦶', '👂', '👃', '🧠'],
            'People & Professions': ['🧑', '‍💻', '👨‍💼', '👩‍💼', '👷‍♂️', '👷‍♀️', '👩‍⚕️', '👨‍⚕️', '🧑‍🎓', '👩‍🏫', '👨‍🏫', '🧑‍🍳', '👩‍🌾', '👨‍🚀', '👩‍🔬', '👨‍🎤', '🧑‍🎨', '👩‍✈️', '👮', '🕵️‍♀️', '💂‍♂️', '👶', '👦', '👧', '👨', '👩', '👴', '👵'],
            'Animals & Nature': ['🐵', '🐒', '🦍', '🦧', '🐶', '🐕', '🐩', '🐺', '🦊', '🦝', '🐱', '🐈', '🦁', '🐯', '🐅', '🐆', '🐴', '🐎', '🦄', '🦓', '🦌', '🦬', '🐮', '🐷', '🐗', '🐭', '🐹', '🐰', '🐸', '🦆', '🦅', '🦉', '🦚', '🦜', '🕊️', '🦢', '🐢', '🐍', '🦎', '🦖', '🦕'],
            'Food & Drink': ['🍇', '🍈', '🍉', '🍊', '🍋', '🍌', '🍍', '🥭', '🍎', '🍏', '🍐', '🍑', '🍒', '🍓', '🫐', '🥝', '🍅', '🫒', '🥥', '🥑', '🍆', '🥔', '🥕', '🌽', '🌶️', '🍄', '🥜', '🌰', '🍞', '🥐', '🥖', '🥨', '🥞', '🧇', '🧀', '🥩', '🍗', '🍖', '🍔', '🍟', '🍕', '🌭', '🥪', '🌮', '🌯'],
            'Travel & Places': ['🚗', '🚕', '🚙', '🚌', '🚎', '🏎️', '🚓', '🚑', '🚒', '🚐', '🛻', '🚚', '🚛', '🚜', '🛵', '🚲', '🛴', '🚆', '🚄', '🚅', '🚇', '🚈', '🚂', '🚃', '🚄', '🚁', '✈️', '🚀', '🛰️', '🛸', '🛖', '🏠', '🏡', '🏢', '🏗️', '🏛️', '⛪', '🕌', '🕍', '🗼', '🗽', '🏰', '🏯'],
            'Activities & Sports': ['⚽', '⚾', '🥎', '🏀', '🏐', '🏈', '🏉', '🎾', '🥏', '🎳', '🏏', '🏑', '🏒', '🥍', '🏓', '🏸', '🥊', '🥋', '🥅', '⛳', '🎣', '🤿', '🎽', '🎿', '🛷', '⛸️', '⛷️', '🏂', '🏃‍♀️', '🏃‍♂️', '🚶‍♀️', '🚶‍♂️', '🤸‍♂️', '🤸‍♀️', '🧘‍♂️', '🧘‍♀️'],
            'Objects & Gadgets': ['⌚', '📱', '📲', '💻', '⌨️', '🖥️', '🖨️', '🖱️', '🖲️', '🕹️', '🗜️', '💽', '💾', '💿', '📀', '📼', '📷', '📸', '📹', '🎥', '📽️', '🎞️', '📞', '☎️', '📟', '📠', '🔌', '🔋', '📡', '💡', '🔦', '💵', '💶', '💷', '💰', '💳'],
            'Symbols': ['❤️', '🧡', '💛', '💚', '💙', '💜', '🖤', '🤍', '🤎', '💔', '❣️', '💕', '💞', '💓', '💗', '💖', '💘', '💝', '💟', '☮️', '☪️', '🕉️', '☸️', '☯️', '🆔', '⚛️', '⚕️', '♻️', '⚜️']
        };

        function suggestHashtags(input) {
            const query = input.toLowerCase().replace('#', '');
            if (query.length < 2) return [];
            return hashtagDictionary.filter(tag => tag.toLowerCase().includes(query)).slice(0, 10);
        }

        function showHashtagSuggestions(suggestions) {
            hashtagSuggestions.innerHTML = '';
            if (suggestions.length === 0) {
                hashtagSuggestions.classList.add('hidden');
                return;
            }
            suggestions.forEach(tag => {
                const div = document.createElement('div');
                div.classList.add('px-3', 'py-2', 'cursor-pointer', 'hover:bg-gray-200', 'rounded-md');
                div.textContent = `#${tag}`;
                div.addEventListener('click', () => {
                    hashtagInput.value = `#${tag}`;
                    hashtagSuggestions.classList.add('hidden');
                });
                hashtagSuggestions.appendChild(div);
            });
            hashtagSuggestions.classList.remove('hidden');
        }

        function insertHashtag(hashtag) {
            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            const value = editor.value;
            let prefix = (start > 0 && value.charAt(start - 1) !== ' ' && value.charAt(start - 1) !== '\n') ? ' ' : '';
            let formattedHashtag = hashtag.startsWith('#') ? hashtag : '#' + hashtag;
            editor.value = value.substring(0, start) + prefix + formattedHashtag + ' ' + value.substring(end);
            editor.focus();
            editor.setSelectionRange(start + prefix.length + formattedHashtag.length + 1, start + prefix.length + formattedHashtag.length + 1);
        }

        function convertSelectionToHashtag() {
            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            if (start === end) {
                showMessage("Please select text to convert to hashtag.", true);
                return;
            }
            const selectedText = editor.value.slice(start, end);
            const hashtag = '#' + selectedText.replace(/\s+/g, '');
            editor.value = editor.value.slice(0, start) + hashtag + editor.value.slice(end);
            editor.focus();
            editor.setSelectionRange(start, start + hashtag.length);
            showMessage("Text converted to hashtag!");
        }

        function insertEmoji(emoji) {
            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            const value = editor.value;
            editor.value = value.substring(0, start) + emoji + value.substring(end);
            editor.focus();
            editor.setSelectionRange(start + emoji.length, start + emoji.length);
        }

        function revertToNormal(text) {
            let revertedText = '';
            for (const char of text) {
                let foundMapping = false;
                
                if (revertScriptMap[char]) {
                    revertedText += revertScriptMap[char];
                    foundMapping = true;
                }
                
                if (!foundMapping && revertCircledMap[char]) {
                    revertedText += revertCircledMap[char];
                    foundMapping = true;
                }

                if (!foundMapping && revertSquaredMap[char]) {
                    revertedText += revertSquaredMap[char];
                    foundMapping = true;
                }
                
                if (!foundMapping) {
                    for (const style in styleMap) {
                        const map = styleMap[style];
                        const cp = char.codePointAt(0);
    
                        if (map.upper && cp >= map.upper && cp <= map.upper + 25) {
                            revertedText += String.fromCodePoint('A'.charCodeAt(0) + (cp - map.upper));
                            foundMapping = true;
                            break;
                        } else if (map.lower && cp >= map.lower && cp <= map.lower + 25) {
                            revertedText += String.fromCodePoint('a'.charCodeAt(0) + (cp - map.lower));
                            foundMapping = true;
                            break;
                        } else if (map.digits && cp >= map.digits && cp <= map.digits + 9) {
                            revertedText += String.fromCodePoint('0'.charCodeAt(0) + (cp - map.digits));
                            foundMapping = true;
                            break;
                        }
                    }
                }

                if (!foundMapping) {
                    if (Object.values(directItalicMap).includes(char)) {
                        const originalChar = Object.keys(directItalicMap).find(key => directItalicMap[key] === char);
                        revertedText += originalChar;
                        foundMapping = true;
                    }
                }
                
                if (!foundMapping) {
                    revertedText += char;
                }
            }
            return revertedText.replace(/\u0332/g, '').replace(/\u0336/g, '');
        }

        function transformChunk(text, styleName, addUnderline, addStrike) {
            let transformed = '';
            const style = styleMap[styleName];
            
            for (const char of text) {
                let convertedChar = char;
                
                if (styleName === 'script' && scriptSpecialMap[char]) {
                    convertedChar = scriptSpecialMap[char];
                } else if (styleName === 'circled-negative' || styleName === 'squared-negative') {
                    convertedChar = style[char] || char;
                } else if (style) {
                    const cp = char.codePointAt(0);
                    if (styleName === 'serif-italic' && directItalicMap[char]) {
                        convertedChar = directItalicMap[char];
                    } else if (frenchChars[char]) {
                        const simpleChar = frenchChars[char];
                        const simpleCp = simpleChar.codePointAt(0);
                        if (simpleCp >= 'A'.charCodeAt(0) && simpleCp <= 'Z'.charCodeAt(0) && style.upper) {
                            convertedChar = String.fromCodePoint(style.upper + simpleCp - 'A'.charCodeAt(0));
                        } else if (simpleCp >= 'a'.charCodeAt(0) && simpleCp <= 'z'.charCodeAt(0) && style.lower) {
                            convertedChar = String.fromCodePoint(style.lower + simpleCp - 'a'.charCodeAt(0));
                        }
                    } else if (cp >= 'A'.charCodeAt(0) && cp <= 'Z'.charCodeAt(0) && style.upper) {
                        convertedChar = String.fromCodePoint(style.upper + cp - 'A'.charCodeAt(0));
                    } else if (cp >= 'a'.charCodeAt(0) && cp <= 'z'.charCodeAt(0) && style.lower) {
                        convertedChar = String.fromCodePoint(style.lower + cp - 'a'.charCodeAt(0));
                    } else if (cp >= '0'.charCodeAt(0) && cp <= '9'.charCodeAt(0) && style.digits) {
                        convertedChar = String.fromCodePoint(style.digits + cp - '0'.charCodeAt(0));
                    }
                }

                if (addStrike && convertedChar.trim() !== '') {
                    convertedChar = convertedChar + '\u0336';
                }
                
                if (addUnderline && convertedChar.trim() !== '') {
                    convertedChar = convertedChar + '\u0332';
                }
                
                transformed += convertedChar;
            }
            return transformed;
        }

        function showMessage(message, isError = false) {
            messageDiv.textContent = message;
            messageDiv.className = `message opacity-100 transition-opacity duration-300 p-2 rounded-lg text-center ${isError ? 'error' : 'success'}`;
            setTimeout(() => {
                messageDiv.classList.remove('opacity-100');
            }, 3000);
        }

        function populateEmojiCategories() {
            emojiCategories.innerHTML = '';
            Object.keys(emojiCategoriesData).forEach(category => {
                const button = document.createElement('button');
                button.classList.add('px-3', 'py-1', 'bg-white', 'border', 'border-gray-300', 'rounded-md', 'text-xs', 'cursor-pointer', 'transition-colors', 'hover:bg-gray-200', 'active:bg-[#0a66c2]', 'active:text-white', 'active:border-[#0a66c2]');
                button.textContent = category;
                button.addEventListener('click', () => {
                    document.querySelectorAll('#emoji-categories button').forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    populateEmojis(category);
                });
                emojiCategories.appendChild(button);
            });
            if (Object.keys(emojiCategoriesData).length > 0) {
                document.querySelector('#emoji-categories button').classList.add('active');
                populateEmojis(Object.keys(emojiCategoriesData)[0]);
            }
        }

        function populateEmojis(category) {
            emojiGrid.innerHTML = '';
            if (emojiCategoriesData[category]) {
                emojiCategoriesData[category].forEach(emoji => {
                    const button = document.createElement('button');
                    button.classList.add('p-1', 'text-xl', 'bg-white', 'border', 'border-gray-200', 'rounded-md', 'cursor-pointer', 'transition-colors', 'hover:bg-gray-200');
                    button.textContent = emoji;
                    button.addEventListener('click', () => {
                        insertEmoji(emoji);
                    });
                    emojiGrid.appendChild(button);
                });
            }
        }

        const editor = document.getElementById('editor');
        const ribbonHeaderButtons = document.querySelectorAll('.ribbon-header-btn');
        const toolbarPanels = document.querySelectorAll('.toolbar-panel');
        const ribbonContentContainer = document.getElementById('ribbon-content-container');
        const formatButtons = document.querySelectorAll('.format-btn');
        const copyBtn = document.getElementById('copy-btn');
        const resetBtn = document.getElementById('reset-btn');
        const messageDiv = document.getElementById('message');
        const emojiGrid = document.getElementById('emoji-grid');
        const emojiCategories = document.getElementById('emoji-categories');
        const hashtagInput = document.getElementById('hashtag-input');
        const hashtagSuggestions = document.getElementById('hashtag-suggestions');
        const addHashtagBtn = document.getElementById('add-hashtag-btn');
        const textToHashtagBtn = document.getElementById('text-to-hashtag');
        
        // Initialisation
        populateEmojiCategories();

        // Événements pour les en-têtes du ruban
        ribbonHeaderButtons.forEach(button => {
            button.addEventListener('click', () => {
                const targetId = button.dataset.target;
                const targetPanel = document.getElementById(targetId);

                // Hide all panels
                toolbarPanels.forEach(panel => panel.classList.add('hidden'));

                // Show the target panel and add 'active' class to the button
                targetPanel.classList.remove('hidden');
                ribbonHeaderButtons.forEach(btn => btn.classList.remove('bg-[#378fe9]', 'text-white'));
                button.classList.add('bg-[#378fe9]', 'text-white');
            });
        });
        
        // Activate the first header by default
        ribbonHeaderButtons[0].click();

        // Événements de formatage
        formatButtons.forEach(button => {
            button.addEventListener('click', () => {
                const styleName = button.dataset.style;
                const start = editor.selectionStart;
                const end = editor.selectionEnd;
                const value = editor.value;

                if (styleName === 'reset') {
                    if (start === end) {
                        showMessage("Please select text to reset.", true);
                        return;
                    }
                    const selectedText = value.slice(start, end);
                    const revertedText = revertToNormal(selectedText);
                    const newValue = value.slice(0, start) + revertedText + value.slice(end);
                    editor.value = newValue;
                    editor.focus();
                    editor.setSelectionRange(start, start + revertedText.length);
                    showMessage("Selection reset to normal text.");
                    return;
                }

                if (start === end) {
                    showMessage("Please select text to format.", true);
                    return;
                }

                const selectedText = value.slice(start, end);
                const normalizedText = revertToNormal(selectedText);
                let transformedText;
                let addUnderline = false;
                let addStrike = false;
                let baseStyle = styleName;
                
                if (styleName === 'underline' || styleName === 'bold-underline') {
                    addUnderline = true;
                    baseStyle = styleName === 'bold-underline' ? 'serif-bold' : 'normal';
                }
                if (styleName === 'strike' || styleName === 'bold-strike') {
                    addStrike = true;
                    baseStyle = styleName === 'bold-strike' ? 'serif-bold' : 'normal';
                }

                transformedText = transformChunk(normalizedText, baseStyle, addUnderline, addStrike);

                const newValue = value.slice(0, start) + transformedText + value.slice(end);
                editor.value = newValue;
                editor.focus();
                editor.setSelectionRange(start, start + transformedText.length);
                showMessage("Text formatted successfully.");
            });
        });

        textToHashtagBtn.addEventListener('click', convertSelectionToHashtag);

        hashtagInput.addEventListener('input', () => {
            const suggestions = suggestHashtags(hashtagInput.value);
            showHashtagSuggestions(suggestions);
        });

        hashtagInput.addEventListener('focus', () => {
            const suggestions = suggestHashtags(hashtagInput.value);
            showHashtagSuggestions(suggestions);
        });

        document.addEventListener('click', (e) => {
            if (!hashtagInput.contains(e.target) && !hashtagSuggestions.contains(e.target)) {
                hashtagSuggestions.classList.add('hidden');
            }
        });

        addHashtagBtn.addEventListener('click', () => {
            if (hashtagInput.value.trim() !== '') {
                insertHashtag(hashtagInput.value);
                hashtagInput.value = '';
                hashtagSuggestions.classList.add('hidden');
            }
        });

        hashtagInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                if (hashtagInput.value.trim() !== '') {
                    insertHashtag(hashtagInput.value);
                    hashtagInput.value = '';
                    hashtagSuggestions.classList.add('hidden');
                }
                e.preventDefault();
            }
        });

        copyBtn.addEventListener('click', () => {
            if (!editor.value.trim()) {
                showMessage("No text to copy.", true);
                return;
            }
            editor.select();
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showMessage("Text copied to clipboard!");
                } else {
                    showMessage("Unable to copy text.", true);
                }
            } catch (err) {
                showMessage("Unable to copy text. Please copy manually.", true);
            }
        });

        resetBtn.addEventListener('click', () => {
            editor.value = '';
            showMessage("Editor reset.");
        });
    </script>
</body>
</html>

